<!DOCTYPE html>
<html>
  <head>
    <title>Star Engine</title>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height"/>

    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="starengine.js"></script>
    <script type="text/javascript">
		var game = null;
        $(document).ready(function(){
            game = new se.WindowGame('canvas');

            var scene = new se.Scene();
            game.addScene(scene);

            var obj_player = new se.GameObject('Player',20,20,50,50);
			obj_player.addComponent( new se.ComponentPlayerController(game, 6) );
			obj_player.addComponent( new se.ComponentRigidBody(5) );
			obj_player.addCollider( new se.BoxCollider(0, 0, 50, 50) );
			obj_player.setRenderer( new se.BoxRenderer('#dddddd') );
            scene.add(obj_player);

			scene.getCamera().addComponent( new se.ComponentFollowPlayer(obj_player));

			var chao = new se.GameObject('chao', -100, 250, 1000, 25);
			chao.addCollider( new se.BoxCollider(0, 0, 1000, 25) );
			chao.setRenderer( new se.BoxRenderer('green') );
            scene.add(chao);

            var chao2 = new se.GameObject('chao', 1000, 250, 1000, 25);
            chao2.addCollider( new se.BoxCollider(0, 0, 1000, 25) );
            chao2.setRenderer( new se.BoxRenderer('green') );
            scene.add(chao2);

            game.init();

            $('#b1 span').on('mousedown touchstart',function(){
            	game.joystick.setAxis('horizontal',-1);
            });
            $('#b1 span').on('mouseup touchend',function(){
            	game.joystick.setAxis('horizontal',0);
            });
            $('#b2 span').on('mousedown touchstart',function(){
            	game.joystick.setAxis('horizontal',1);
            });
            $('#b2 span').on('mouseup touchend',function(){
            	game.joystick.setAxis('horizontal',0);
            });
            $('#b3 span').on('mousedown touchstart',function(){
            	game.joystick.setAxis('jump',true);
            });
            $('#b3 span').on('mouseup touchend',function(){
            	game.joystick.setAxis('jump',false);
            });
            /*$('.se-joy-buttons span').on('mouseup touchend', function(){
            	game.joystick.resetAxis();
            });*/
        });
    </script>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }
		body, html {
 			overflow: hidden;
			width: 100%;
			height: 100%;
		}
		canvas { 
		    border: 1px solid black; 
	    }
	    .se-joy-buttons{
	        display: block;
            position: absolute;
			bottom: 40px;
	    }
	    .se-joy-buttons span{
	        padding: 20px;
			border: 1px solid black;
			background-color: #CCC;
	    }
        #b1{
            left: 30px;
        }
        #b2{
            left: 100px;
        }
        #b3{
            right: 30px;
        }
		html {
			-webkit-user-select: none;
		}
    </style>
  </head>
  <body>      
      <canvas id="canvas" width="600" height="600"></canvas>
      <div id="b1" class="se-joy-buttons">
          <span href="#">&nbsp;</span>
      </div>
      <div id="b2" class="se-joy-buttons">
          <span href="#">&nbsp;</span>
      </div>
      <div id="b3" class="se-joy-buttons">
          <span href="#">&nbsp;</span>
      </div>
  </body>
</html>
